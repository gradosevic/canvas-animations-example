function init(){examples.showDistractor();stage=new createjs.Stage("canvas1");w=stage.canvas.width;h=stage.canvas.height;manifest=[{src:"spritesheet_grant.png",id:"grant"},{src:"sky.jpg",id:"sky"},{src:"bee.png",id:"bee"},{src:"flower.png",id:"flower"},{src:"ground.png",id:"ground"},{src:"clouds.png",id:"clouds"},{src:"hill1.png",id:"hill"},{src:"stone.png",id:"stone"},{src:"rainbow.png",id:"rainbow"},{src:"bird.png",id:"bird"},{src:"hill2.png",id:"hill2"}];loader=new createjs.LoadQueue(false);loader.addEventListener("complete",handleComplete);loader.loadManifest(manifest,true,"images/");stage.enableMouseOver(20);createjs.Sound.initializeDefaultPlugins();var e="sounds/";var t=[{src:"BEE.mp3",data:{audioSprite:[{id:"bee",startTime:100,duration:4e3}]}},{src:"bird.mp3",data:{audioSprite:[{id:"bird",startTime:100,duration:2e3}]}}];createjs.Sound.alternateExtensions=["mp3"];createjs.Sound.registerSounds(t,e);var n=createjs.Sound.play("bee");n.volume=.1}function handleComplete(){examples.hideDistractor();sky=new createjs.Shape;sky.graphics.beginBitmapFill(loader.getResult("sky")).drawRect(0,0,w,h);flower=new createjs.Shape;flower.graphics.beginBitmapFill(loader.getResult("flower")).drawRect(0,0,303,422);flower.x=800;flower.y=400;var e=loader.getResult("ground");ground=new createjs.Shape;ground.graphics.beginBitmapFill(e).drawRect(0,0,w+e.width,e.height);ground.tileW=e.width;ground.y=h-e.height;hill=new createjs.Bitmap(loader.getResult("hill"));hill.setTransform(Math.random()*w,h-hill.image.height*4-e.height,4,4);hill.alpha=.5;hill.y=570;hill.x=0;stone=new createjs.Bitmap(loader.getResult("stone"));stone.alpha=.9;stone.y=500;clouds=new createjs.Bitmap(loader.getResult("clouds"));clouds.x=-600;hill2=new createjs.Bitmap(loader.getResult("hill2"));hill2.setTransform(Math.random()*w,h-hill2.image.height*3-e.height,3,3);hill2.y=650;var t=new createjs.SpriteSheet({framerate:30,images:[loader.getResult("grant")],frames:{regX:-82,height:292,count:64,regY:0,width:165},animations:{run:[0,25,"run",1.5],jump:[26,63,"run"]}});grant=new createjs.Sprite(t,"run");grant.y=35;spriteSheetBee=new createjs.SpriteSheet({framerate:30,images:[loader.getResult("bee")],frames:{regX:-82,height:600,count:6,regY:0,width:320},animations:{down:[0,0,"down",1.5],over:[1,1,"over",1.5],blink:[2,2,"down",.3],fly:[3,5,"fly"]}});bee=new createjs.Sprite(spriteSheetBee,"down");bee.x=680;bee.y=-100;bee.addEventListener("mouseover",handleBeeMouseOver);bee.addEventListener("mouseout",handleBeeMouseOut);bee.addEventListener("click",handleBeeMouseClick);setInterval(function(){handleBeeBlink()},2e3);rainbow=spriteSheetRainbow=new createjs.SpriteSheet({framerate:30,images:[loader.getResult("rainbow")],frames:{regX:-250,height:367,count:3,regY:-300,width:602},animations:{down:[0,0,"down",1.5],over:[1,1,"over",1.5]}});rainbow=new createjs.Sprite(spriteSheetRainbow,"down");rainbow.addEventListener("mouseover",handleRainbowMouseOver);rainbow.addEventListener("mouseout",handleRainbowMouseOut);bird=spriteSheetRainbow=new createjs.SpriteSheet({framerate:20,images:[loader.getResult("bird")],frames:{regX:-250,height:300,count:9,regY:-10,width:400},animations:{down:[0,8,"down"]}});bird=new createjs.Sprite(spriteSheetRainbow,"down");bird.alpha=.6;bird.addEventListener("mouseover",handleBirdMouseOver);bird.addEventListener("mouseout",handleBirdMouseOut);bird.addEventListener("click",handleBirdMouseClick);stage.addChild(sky,rainbow,hill,hill2,stone,grant,flower,clouds,bird,bee);stage.addEventListener("stagemousedown",handleJumpStart);createjs.Ticker.timingMode=createjs.Ticker.RAF;createjs.Ticker.addEventListener("tick",tick)}function handleBirdMouseClick(){bird.x=bird.x+100}function handleBirdMouseOver(){bird.alpha=1;createjs.Sound.play("bird")}function handleBirdMouseOut(){bird.alpha=.6}function handleRainbowMouseOver(){rainbow.gotoAndPlay("over")}function handleRainbowMouseOut(){rainbow.gotoAndPlay("down")}function handleJumpStart(){grant.gotoAndPlay("jump")}function handleBeeMouseClick(){if(bee._animation.name==="fly"){bee.gotoAndPlay("down");createjs.Sound.stop("bee")}else{bee.gotoAndPlay("fly");createjs.Sound.play("bee");setTimeout(function(){bee.gotoAndPlay("down");createjs.Sound.stop("bee")},3e3)}}function handleBeeBlink(){if(bee._animation.name==="down"){bee.gotoAndPlay("blink")}}function handleBeeMouseOver(){if(bee._animation.name==="down"){bee.gotoAndPlay("over")}}function handleBeeMouseOut(){if(bee._animation.name!=="fly"){bee.gotoAndPlay("down")}}function tick(e){var t=e.delta/1e3;var n=e.delta/1e3;var r=grant.x+150*t;var i=clouds.x+9*n;var s=e.delta/1e3;var o=bird.x-19*s;var u=grant.getBounds().width*grant.scaleX;grant.x=r>=w+u?-u:r;grant.visible=false;var a=clouds.getBounds().width*clouds.scaleX;clouds.x=i>=w+a?-a:i;var f=bird.getBounds().width*bird.scaleX;bird.x=o>=w+f?-f:o;stage.update(e)}var stage,w,h,loader;var sky,grant,ground,hill,hill2,flower,bee,clouds,stone,rainbow,bird